{% extends 'layout.html' %}
{% block content %}
  <h3>Your Cart</h3>
  {% if products %}
    <ul class="list-group mb-3">
      {% for p in products %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center gap-3">
            <img src="/{{ p.image_url }}" width="56" height="56" class="rounded" alt="{{ p.name }}">
            <span>{{ p.name }}</span>
          </div>
          <span class="fw-bold">₹{{ '%.2f'|format(p.price) }}</span>
        </li>
      {% endfor %}
    </ul>

    <div class="d-flex justify-content-between align-items-center">
      <strong>Total:</strong>
      <strong>₹{{ '%.2f'|format(total) }}</strong>
    </div>

    <!-- Checkout posts to server; server clears cart and opens WhatsApp -->
    <form method="post" action="{{ url_for('checkout') }}" class="mt-3">
      <button type="submit" class="btn btn-success">Checkout</button>
    </form>
  {% else %}
    <div class="alert alert-secondary">Your cart is empty.</div>
  {% endif %}
{% endblock %}
